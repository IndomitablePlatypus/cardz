{
    "openapi": "3.0.2",
    "info": {
        "title": "Cardz",
        "version": "2.0.0"
    },
    "servers": [
        {
            "url": "http:\/\/localhost:8000",
            "description": "App Environment"
        },
        {
            "url": "http:\/\/localhost:8000",
            "description": "Default"
        }
    ],
    "paths": {
        "\/api\/v1\/customer\/get-token": {
            "post": {
                "tags": [
                    "customer"
                ],
                "summary": "Get user token",
                "description": "Returns new API user token (for basic bearer auth). Requires identity, password and device name.",
                "requestBody": {
                    "description": "Get customer API access token for the specific device. <br>\n                          With each request new token is generated. Old ones are invalidated shortly after. <br>\n                          *Tokens on other customer devices remain unaffected.\n            ",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/GetTokenRequest"
                            }
                        }
                    }
                }
            }
        },
        "\/api\/v1\/customer\/register": {
            "post": {
                "tags": [
                    "customer"
                ],
                "summary": "Register user",
                "description": "Registers new user with email OR phone, password, device name (for token). Returns new auth token.",
                "requestBody": {
                    "description": "Register new customer",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/RegisterRequest"
                            }
                        }
                    }
                }
            }
        },
        "\/api\/v1\/customer\/workspaces": {
            "get": {
                "tags": [
                    "customer"
                ],
                "summary": "Workspaces",
                "description": "Returns all workspaces"
            }
        },
        "\/api\/v1\/customer\/id": {
            "get": {
                "tags": [
                    "customer"
                ],
                "summary": "Get authorized user id",
                "description": "Returns id of the authenticated user.",
                "security": [
                    {
                        "BearerToken": []
                    }
                ]
            }
        },
        "\/api\/v1\/customer\/card": {
            "get": {
                "tags": [
                    "customer"
                ],
                "summary": "User cards",
                "description": "Returns all active cards for the current user.",
                "security": [
                    {
                        "BearerToken": []
                    }
                ]
            }
        },
        "\/api\/v1\/customer\/card\/{cardId}": {
            "get": {
                "tags": [
                    "customer"
                ],
                "summary": "User card",
                "description": "Returns an active card, owned by the current user, by its id.",
                "parameters": [
                    {
                        "name": "cardId",
                        "in": "path",
                        "description": "Card GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#\/components\/responses\/"
                    }
                },
                "security": [
                    {
                        "BearerToken": []
                    }
                ]
            }
        },
        "\/api\/v1\/workspace": {
            "get": {
                "tags": [
                    "business",
                    "workspace"
                ],
                "summary": "Get workspaces",
                "description": "Returns all workspaces where the current user is a collaborator.",
                "security": [
                    {
                        "BearerToken": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "business",
                    "workspace"
                ],
                "summary": "Add a new workspace",
                "description": "Returns the newly created workspace where the current user is an owner.",
                "requestBody": {
                    "description": "Add workspace request",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/WorkspaceProfile"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "BearerToken": []
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}": {
            "get": {
                "tags": [
                    "business",
                    "workspace"
                ],
                "summary": "Get a workspace",
                "description": "Returns workspace where the current user is a collaborator.\nRequires user to be authorized to work in this workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "security": [
                    {
                        "BearerToken": []
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/profile": {
            "put": {
                "tags": [
                    "business",
                    "workspace"
                ],
                "summary": "Change workspace description",
                "description": "Changes the current workspace description.\nRequires user to be the owner of the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Change workspace profile request",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/WorkspaceProfile"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "BearerToken": []
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/collaboration\/leave": {
            "post": {
                "tags": [
                    "business",
                    "collaboration"
                ],
                "summary": "Leave collaboration",
                "description": "Rescinds the user ability collaborate in the current workspace.\nRequires user to be authorized to work in the current workspace. Requires user to NOT be the owner of it.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/collaboration\/invite": {
            "post": {
                "tags": [
                    "business",
                    "collaboration"
                ],
                "summary": "Propose invite",
                "description": "Returns id of the new invite to collaborate on the workspace.\nRequires user to be the owner of the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/collaboration\/invite\/{inviteId}\/accept": {
            "put": {
                "tags": [
                    "business",
                    "collaboration"
                ],
                "summary": "Accept invite",
                "description": "Accepts an invitation to collaborate. Authorizes user to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "inviteId",
                        "in": "path",
                        "description": "Invite GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/collaboration\/invite\/{inviteId}\/discard": {
            "delete": {
                "tags": [
                    "business",
                    "collaboration"
                ],
                "summary": "Discard invite",
                "description": "Returns id of the new invite to collaborate on the workspace.\nRequires user to be the owner of the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "inviteId",
                        "in": "path",
                        "description": "Invite GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/plan": {
            "get": {
                "tags": [
                    "business",
                    "plan"
                ],
                "summary": "Get plans",
                "description": "Returns all plans in the current workspace.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            },
            "post": {
                "tags": [
                    "business",
                    "plan"
                ],
                "summary": "Add a new plan",
                "description": "Adds a new plan to the current workspace.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Add plan request",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/PlanProfile"
                            }
                        }
                    }
                }
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/plan\/{planId}": {
            "get": {
                "tags": [
                    "business",
                    "plan"
                ],
                "summary": "Get plan",
                "description": "Returns a plans in the current workspace by id.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "planId",
                        "in": "path",
                        "description": "Plan GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/plan\/{planId}\/description": {
            "put": {
                "tags": [
                    "business",
                    "plan"
                ],
                "summary": "Change plan description",
                "description": "Changes plan description.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "planId",
                        "in": "path",
                        "description": "Plan GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Change plan description request",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/PlanProfile"
                            }
                        }
                    }
                }
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/plan\/{planId}\/launch": {
            "put": {
                "tags": [
                    "business",
                    "plan"
                ],
                "summary": "Launch a plan",
                "description": "Launches a plan to activity. Requires an expiration date for aut expiration. Can be relaunched with a new date.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "planId",
                        "in": "path",
                        "description": "Plan GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Launch plan request",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/PlanExpiration"
                            }
                        }
                    }
                }
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/plan\/{planId}\/stop": {
            "put": {
                "tags": [
                    "business",
                    "plan"
                ],
                "summary": "Stop a plan",
                "description": "Stops a plan from active state.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "planId",
                        "in": "path",
                        "description": "Plan GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/plan\/{planId}\/archive": {
            "put": {
                "tags": [
                    "business",
                    "plan"
                ],
                "summary": "Archive a plan",
                "description": "Archives plan. Archived plans are invisible by normal means. Plans are archived automatically on their expiration date.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "planId",
                        "in": "path",
                        "description": "Plan GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/plan\/{planId}\/requirement": {
            "post": {
                "tags": [
                    "business",
                    "plan",
                    "requirement"
                ],
                "summary": "Add plan requirement",
                "description": "Adds a new requirement to the plan. Requirement changes are propagated to the relevant cards.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "planId",
                        "in": "path",
                        "description": "Plan GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Add requirement request",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/RequirementProfile"
                            }
                        }
                    }
                }
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/plan\/{planId}\/requirement\/{requirementId}": {
            "delete": {
                "tags": [
                    "business",
                    "plan",
                    "requirement"
                ],
                "summary": "Remove plan requirement",
                "description": "Removes the requirement from the plan. Requirement changes are propagated to the relevant cards.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "planId",
                        "in": "path",
                        "description": "Plan GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "requirementId",
                        "in": "path",
                        "description": "Requirement GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            },
            "put": {
                "tags": [
                    "business",
                    "plan",
                    "requirement"
                ],
                "summary": "Change plan requirement description",
                "description": "Changes the requirement description. Description changes are propagated to the relevant cards.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "planId",
                        "in": "path",
                        "description": "Plan GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "requirementId",
                        "in": "path",
                        "description": "Requirement GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Change requirement description request",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/RequirementProfile"
                            }
                        }
                    }
                }
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/card": {
            "post": {
                "tags": [
                    "business",
                    "card"
                ],
                "summary": "Issue card",
                "description": "Issues card for a plan to a customer.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Issue card request",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/NewCard"
                            }
                        }
                    }
                }
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/card\/{cardId}": {
            "get": {
                "tags": [
                    "business",
                    "card"
                ],
                "summary": "Get card",
                "description": "Returns card by card id if it is issued in the current workspace.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cardId",
                        "in": "path",
                        "description": "Card GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/card\/{cardId}\/complete": {
            "put": {
                "tags": [
                    "business",
                    "card"
                ],
                "summary": "Complete card",
                "description": "Marks card as completed, meaning the owner has received their bonus.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cardId",
                        "in": "path",
                        "description": "Card GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/card\/{cardId}\/revoke": {
            "put": {
                "tags": [
                    "business",
                    "card"
                ],
                "summary": "Revoke card",
                "description": "Marks card as revoked, meaning the owner cannot use and even see it anymore.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cardId",
                        "in": "path",
                        "description": "Card GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/card\/{cardId}\/block": {
            "put": {
                "tags": [
                    "business",
                    "card"
                ],
                "summary": "Block card",
                "description": "Marks card as blocked, meaning the owner cannot use it temporarily until it's unblocked.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cardId",
                        "in": "path",
                        "description": "Card GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/card\/{cardId}\/unblock": {
            "put": {
                "tags": [
                    "business",
                    "card"
                ],
                "summary": "Unblock card",
                "description": "Marks card as unblocked, meaning the owner can interact with it again.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cardId",
                        "in": "path",
                        "description": "Card GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/card\/{cardId}\/achievement": {
            "post": {
                "tags": [
                    "business",
                    "card"
                ],
                "summary": "Note achievement to the card",
                "description": "Marks one of the Plan requirements as achieved in the customer card.\nCard will be marked as satisfied shortly after the last requirement is marked.\nMeaning the card owner is now legible for the bonus.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cardId",
                        "in": "path",
                        "description": "Card GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Note card achievement request",
                    "content": {
                        "application\/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/Achievement"
                            }
                        }
                    }
                }
            }
        },
        "\/api\/v1\/workspace\/{workspaceId}\/card\/{cardId}\/achievement\/{achievementId}": {
            "delete": {
                "tags": [
                    "business",
                    "card"
                ],
                "summary": "Dismiss achievement from the card",
                "description": "Removes achievement and removes satisfaction mark from the card if necessary.\nCan only be done until the card owner received their bonus.\nRequires user to be authorized to work in the current workspace.",
                "parameters": [
                    {
                        "name": "workspaceId",
                        "in": "path",
                        "description": "Workspace GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cardId",
                        "in": "path",
                        "description": "Card GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "achievementId",
                        "in": "path",
                        "description": "Achievement GUID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "WorkspaceProfile": {
                "description": "Workspace profile request",
                "type": "object",
                "required": [
                    "name",
                    "description",
                    "address"
                ],
                "properties": {
                    "name": {
                        "description": "Workspace (business) title",
                        "type": "string"
                    },
                    "description": {
                        "description": "Workspace (business) description",
                        "type": "string"
                    },
                    "address": {
                        "description": "Workspace (business) address",
                        "type": "string"
                    }
                }
            },
            "PlanProfile": {
                "description": "Plan profile request",
                "type": "object",
                "required": [
                    "description"
                ],
                "properties": {
                    "description": {
                        "description": "Plan description",
                        "type": "string"
                    }
                }
            },
            "RequirementProfile": {
                "description": "Requirement profile request",
                "type": "object",
                "required": [
                    "description"
                ],
                "properties": {
                    "description": {
                        "description": "Requirement description",
                        "type": "string"
                    }
                }
            },
            "PlanExpiration": {
                "description": "Plan expiration request",
                "type": "object",
                "required": [
                    "expires"
                ],
                "properties": {
                    "expires": {
                        "description": "Plan expiration date",
                        "format": "date-time",
                        "type": "string"
                    }
                }
            },
            "Achievement": {
                "description": "Achievement request",
                "type": "object",
                "required": [
                    "achievementId",
                    "description"
                ],
                "properties": {
                    "achievementId": {
                        "description": "Achievement (requirement) id",
                        "format": "uuid",
                        "type": "string"
                    },
                    "description": {
                        "description": "Achievement (requirement) description",
                        "type": "string"
                    }
                }
            },
            "GetTokenRequest": {
                "description": "New API access token for the specific device request",
                "type": "object",
                "required": [
                    "identity",
                    "password",
                    "deviceName"
                ],
                "properties": {
                    "identity": {
                        "description": "Identity is either phone or email",
                        "type": "string"
                    },
                    "password": {
                        "description": "Password",
                        "format": "password",
                        "type": "string"
                    },
                    "deviceName": {
                        "description": "Device name is required to distinguish between different access tokens",
                        "type": "string"
                    }
                }
            },
            "RegisterRequest": {
                "anyOf": [
                    {
                        "description": "Phone required",
                        "type": "object",
                        "required": [
                            "phone",
                            "name",
                            "password",
                            "deviceName"
                        ],
                        "properties": {
                            "phone": {
                                "description": "Phone",
                                "type": "string"
                            },
                            "email": {
                                "description": "Email is required if phone is not provided",
                                "type": "string"
                            },
                            "name": {
                                "description": "Customer name",
                                "type": "string"
                            },
                            "password": {
                                "description": "Password",
                                "format": "password",
                                "type": "string"
                            },
                            "deviceName": {
                                "description": "Device name is required to distinguish between different access tokens",
                                "type": "string"
                            }
                        }
                    },
                    {
                        "description": "Email required",
                        "type": "object",
                        "required": [
                            "email",
                            "name",
                            "password",
                            "deviceName"
                        ],
                        "properties": {
                            "phone": {
                                "description": "Phone",
                                "type": "string"
                            },
                            "email": {
                                "description": "Email is required if phone is not provided",
                                "type": "string"
                            },
                            "name": {
                                "description": "Customer name",
                                "type": "string"
                            },
                            "password": {
                                "description": "Password",
                                "format": "password",
                                "type": "string"
                            },
                            "deviceName": {
                                "description": "Device name is required to distinguish between different access tokens",
                                "type": "string"
                            }
                        }
                    }
                ]
            },
            "NewCard": {
                "description": "New card request",
                "type": "object",
                "required": [
                    "planId",
                    "customerId"
                ],
                "properties": {
                    "planId": {
                        "description": "Plan id",
                        "format": "uuid",
                        "type": "string"
                    },
                    "customerId": {
                        "description": "Customer id",
                        "format": "uuid",
                        "type": "string"
                    }
                }
            },
            "": {
                "type": "object",
                "properties": {
                    "cardId": {
                        "description": "Card Id",
                        "format": "uuid",
                        "type": "string"
                    },
                    "planId": {
                        "description": "Plan Id",
                        "format": "uuid",
                        "type": "string"
                    },
                    "customerId": {
                        "description": "Customer Id",
                        "format": "uuid",
                        "type": "string"
                    },
                    "satisfied": {
                        "description": "Whether all requirements to receive a bonus are satisfied",
                        "type": "boolean"
                    },
                    "completed": {
                        "description": "Whether customer has received the bonus for this card",
                        "type": "boolean"
                    },
                    "achievements": {
                        "description": "Achieved requirements",
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "achievementId": {
                                    "description": "Achievement Id = corresponding requirement id",
                                    "format": "uuid",
                                    "type": "string"
                                },
                                "description": {
                                    "description": "Achievement description = corresponding requirement description",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "requirements": {
                        "description": "All requirements",
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "requirementId": {
                                    "description": "Requirement id",
                                    "format": "uuid",
                                    "type": "string"
                                },
                                "description": {
                                    "description": "Requirement description",
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "responses": {
            "": {
                "description": "Successful response",
                "content": {
                    "application\/json": {
                        "schema": {
                            "$ref": "#\/components\/schemas\/"
                        }
                    }
                }
            }
        },
        "securitySchemes": {
            "BearerToken": {
                "type": "apiKey",
                "in": "header",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    },
    "security": [
        {
            "BearerToken": []
        }
    ],
    "tags": [
        {
            "name": "customer",
            "description": "Pertains to customer operations"
        },
        {
            "name": "business",
            "description": "Pertains to all workspace operations"
        },
        {
            "name": "card",
            "description": "Pertains to workspace operations with cards"
        },
        {
            "name": "collaboration",
            "description": "Pertains to workspace operations with collaboration"
        },
        {
            "name": "plan",
            "description": "Pertains to workspace operations with plans"
        },
        {
            "name": "requirement",
            "description": "Pertains to workspace operations with requirements in a plan"
        },
        {
            "name": "workspace",
            "description": "Pertains to workspace-specific operations"
        }
    ]
}
